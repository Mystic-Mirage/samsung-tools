# Contributor: Fortunato Ventre (voRia) <vorione@gmail.com>

pkgname=samsung-tools
pkgver=2.0
pkgrel=1
pkgdesc="Tools for Samsung netbooks"
arch=('any')
url="https://launchpad.net/samsung-tools"
license=('GPLv3')
depends=('pm-utils' 'xbindkeys' 'rfkill' 'dbus-python' 'python-notify')
optdepends=('phc-intel: for CPU undervolting')
backup=(etc/samsung-tools/system.conf
        etc/samsung-tools/session.conf
        etc/samsung-tools/scripts/bluetooth-on
        etc/samsung-tools/scripts/bluetooth-off
        etc/samsung-tools/scripts/wireless-on
        etc/samsung-tools/scripts/wireless-off)
install=samsung-tools.install
source=(http://launchpad.net/samsung-tools/trunk/$pkgver/+download/$pkgname-$pkgver.tar.gz
	samsung-tools.rcd)
md5sums=('c0ee95ad55cda2a8223fcaefc7872cac'
         'f13fe6219c58420ddcea6917faf1e1b7')
         
build() {
  cd "$srcdir/$pkgname-$pkgver"
  
  # Fix shebangs in all .py files in order to use python2
  find . -name \*.py | while read FILE; do
    sed -i "1s:#!/usr/bin/env python:#!/usr/bin/env python2:" "$FILE"
  done
  
  make DESTDIR="$pkgdir/" install || return 1
  install -D -m755 "${srcdir}/samsung-tools.rcd" "${pkgdir}/etc/rc.d/samsung-tools" || return 1
}
