# Contributor: Fortunato Ventre (voRia) <vorione@gmail.com>

pkgname=samsung-tools
pkgver=1.3.2
pkgrel=2
pkgdesc="Tools for Samsung netbooks"
arch=('any')
url="https://launchpad.net/samsung-tools"
license=('GPLv3')
depends=('pm-utils' 'xbindkeys' 'rfkill' 'dbus-python' 'easy-slow-down-manager-svn' 'python-notify')
optdepends=('phc-intel: for CPU undervolting')
backup=(etc/samsung-tools/system.conf
        etc/samsung-tools/session.conf
        etc/samsung-tools/scripts/bluetooth-on
        etc/samsung-tools/scripts/bluetooth-off
        etc/samsung-tools/scripts/wireless-on
        etc/samsung-tools/scripts/wireless-off)
install=samsung-tools.install
source=(http://launchpad.net/samsung-tools/trunk/$pkgver/+download/$pkgname-$pkgver.tar.gz
	samsung-tools.rcd)
md5sums=('03d7f89985f06244ad3e425dcd41a2ec'
         '60e9ef24018192c6475c59cd7ce99a7b')
build() {
  cd "$srcdir/$pkgname-$pkgver"
  
  # Fix shebangs in all .py files in order to use python2
  find . -name \*.py | while read FILE; do
    sed -i "1s:#!/usr/bin/env python:#!/usr/bin/env python2:" "$FILE"
  done
  
  make DESTDIR="$pkgdir/" install || return 1
  install -D -m755 "${srcdir}/samsung-tools.rcd" "${pkgdir}/etc/rc.d/samsung-tools" || return 1
}
